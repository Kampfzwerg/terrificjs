!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.T=e()}(this,function(){/*!
 * TerrificJS modularizes your frontend code by solely relying on naming conventions.
 * http://terrifically.org
 *
 * @copyright   Copyright (c) <%= grunt.template.today('yyyy') %> Remo Brunschwiler
 * @license     Licensed under MIT license
 * @version     <%= pkg.version %>
 */
function t(t,n){if(t||n)if(n instanceof Node){var o=n;n=t,t=o}else t instanceof Node||n?t instanceof Node&&!n&&(n={}):(n=t,t=document);else t=document,n={};this._ctx=t,this._sandbox=new e(this,n),this._modules={},this._id=1}function e(t,e){this._application=t,this._config=e,this._connectors=[]}function n(t,e,n){this.ctx=t,this.sandbox=e,this.events=new o(e),this.id=n}function o(t){this._listeners={},this._sandbox=t,this._connected=!1}t.prototype.registerModules=function(t){var e={};t=t||this._ctx;var n=document.createDocumentFragment();return n.appendChild(t),[].forEach.call(n.querySelectorAll("[data-t-name]"),function(t){var n=i.capitalize(i.camelize(t.getAttribute("data-t-name").trim())),o=t.getAttribute("data-t-skin")?t.getAttribute("data-t-skin").split(","):[];o=o.map(function(t){return i.capitalize(i.camelize(t.trim()))});var r=this.registerModule(t,n,o);r&&(e[r.id]=r)}.bind(this)),e},t.prototype.unregisterModules=function(t){t=t||this._modules;for(var e in t)t.hasOwnProperty(e)&&delete this._modules[e]},t.prototype.start=function(t){t=t||this._modules;var e=[];for(var n in t)if(t.hasOwnProperty(n)){var o=t[n].start();if(!(o instanceof Promise))throw Error("The module with the id "+n+" does not return a Promise on start");e.push(o)}if(0===e.length)return new Promise(function(t){t([])});var i=Promise.all(e);return i.then(function(t){for(var e=0,n=t.length;n>e;e++)t[e]()}.bind(this))["catch"](function(t){throw Error("Synchronizing the after callbacks failed: "+t)}),i},t.prototype.stop=function(t){t=t||this._modules;for(var e in t)t.hasOwnProperty(e)&&t[e].stop()},t.prototype.registerModule=function(t,e,o){var i=this._modules;if(e=e||void 0,o=o||[],e&&n[e]){var r=this._id++;t.setAttribute("data-t-id",r),i[r]=new n[e](t,this._sandbox,r);for(var s=0,a=o.length;a>s;s++){var c=o[s];n[e][c]&&n[e][c](i[r])}return i[r]}return null},t.prototype.getModuleById=function(t){if(void 0!==this._modules[t])return this._modules[t];throw Error("The module with the id "+t+" does not exist")},e.prototype.addModules=function(t){var e=[],n=this._application;return t instanceof Node&&(e=n.registerModules(t),n.start(e)),e},e.prototype.removeModules=function(t){var e=this._application;if(t instanceof Node){var n=[],o=document.createDocumentFragment();o.appendChild(t),[].forEach.call(o.querySelectorAll("[data-t-name]"),function(t){var e=t.getAttribute("data-t-id");if(void 0!==e){var o=this.getModuleById(e);o&&n.push(o)}}.bind(this)),t=n}return Array.isArray(t)&&(e.stop(t),e.unregisterModules(t)),this},e.prototype.getModuleById=function(t){return this._application.getModuleById(t)},e.prototype.getConfig=function(){return this._config},e.prototype.getConfigParam=function(t){var e=this._config;if(void 0!==e[t])return e[t];throw Error("The config param "+t+" does not exist")},e.prototype.addConnector=function(t){return this._connectors.push(t),this},e.prototype.removeConnector=function(t){for(var e=this._connectors,n=0,o=e.length;o>n;n++)if(e[n]===t){e.splice(n,1);break}return this},e.prototype.dispatch=function(){for(var t=this._connectors,e=0,n=t.length;n>e;e++){var o=t[e];o.handle.apply(o,arguments)}return this},n.prototype.start=function(){var t=function(){this.after&&this.after()}.bind(this);return new Promise(function(e){this.on?this.on(function(){e(t)}):e(t)}.bind(this))},n.prototype.stop=function(){this.events.disconnect()},n.prototype.on=function(t){t()},n.prototype.after=function(){},o.prototype.on=o.prototype.addListener=function(t,e){return this.connect(),(this._listeners["$"+t]=this._listeners["$"+t]||[]).push(e),this},o.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return this.connect(),n.listener=e,this.on(t,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=function(t,e){if(0===arguments.length)return this._listeners={},this;var n=this._listeners["$"+t];if(!n)return this;if(1===arguments.length)return delete this._listeners["$"+t],this;for(var o,i=0,r=n.length;r>i;i++)if(o=n[i],o===e||o.listener===e){n.splice(i,1);break}return this},o.prototype.emit=function(){return this.connect(),this._sandbox.dispatch.apply(this._sandbox,arguments),this},o.prototype.handle=function(t){var e=[].slice.call(arguments,1),n=this._listeners["$"+t];if(n){n=n.slice(0);for(var o=0,i=n.length;i>o;++o)n[o].apply(this,e)}return this},o.prototype.listeners=function(t){return this._listeners["$"+t]||[]},o.prototype.hasListeners=function(t){return!!this.listeners(t).length},o.prototype.connect=function(){return this._connected||(this._sandbox.addConnector(this),this._connected=!0),this},o.prototype.disconnect=function(){return this._connected&&(this._sandbox.removeConnector(this),this._connected=!1),this};var i={capitalize:function(t){return t.substr(0,1).toUpperCase().concat(t.substr(1))},camelize:function(t){return t.replace(/(\-[A-Za-z])/g,function(t){return t.toUpperCase().replace("-","")})}},r={Application:t,Sandbox:e,Module:n,Connector:o,Utils:i};return r});
//# sourceMappingURL=terrific.min.js.map